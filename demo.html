<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css" />
<script src="http://code.jquery.com/jquery-1.4.1.min.js"></script>
<script src="KTAnchor.js"></script>
</head>
<body class="ar">

<table class="body-table">
	<tr>
		<td class="nav-left" colspan="2">
			<div class="kt-dropdown" style="margin-left:8px;">
				<a href="javascript:;" pushstate="no" class="bold-medium">
					Language : English &nbsp; <b class="angle-down"></b>
				</a>
				<div class="dropdown">
					<b class="angle-up" style="left:18px;"></b>
					<div class="white-board"></div>
				</div>
			</div>
		</td>
		<td class="nav-right"></td>
	</tr>
	<tr>
		<td class="body-left scroll-layout">
			<div>
				<div><a href="/program/main/id/654" pushstate="no">error 500</a></div>
				<div><a href="/program/main/id/654.php" pushstate="no">error 404</a></div>
				<div><a href="rq_script.html" pushstate="no">script</a></div>
				<div><a href="rq_exception.html" pushstate="no">exception</a></div>
			</div>
		</td>
		<td class="body-right scroll-layout" colspan="2">
			<div id="response-container" style="color:#fff;">2</div>
		</td>
	</tr>
</table>

<script>
function onSuccess(container, responseText)
{
	$.KTLog("JQuery.KTAnchor.succes : " + container);

	// 举例：如果想输入一个脚本的处理方式
	if (/^<script/.test(responseText)) {
		$(responseText).appendTo(container).delay(800).remove();
	}
	// 举例：自定义的匹配处理
	else if (/\[exception-message\:protected\] => ([^\n]+)/.test(responseText)) {
		var exception_message = responseText.match(/\[exception-message\:protected\] => ([^\n]+)/);
		$.KTLog(exception_message);
	}
	// 请求到的文本
	else {
		// 填充
		$(container).empty();
		$(container).html(responseText);

		// 填充后将容器内的节点遍历，并绑定符合条件的 <a> 和  <form>
		$(container).KTAnchor(onSuccess, onError, onBegin, onComplete);
		$(container).KTForm(onInputError, onSuccess, onError, onBegin, onComplete);
		$(container).KTPaging();
		$(container).KTDropdown();
	}
}

function onInputError(input, message)
{
	$.KTLog(input, message);
}

function onError(container, XMLHttpRequest)
{
	$.KTLog("JQuery.KTAnchor.error : " + container);
}

function onBegin(container)
{
	$.KTLog("JQuery.KTAnchor.begin : " + container);
}

function onComplete(container, XMLHttpRequest)
{
	$.KTLog("JQuery.KTAnchor.complete : " + container);
}

$(document).ready(function(){
	$(document).KTAnchor(onSuccess, onError, onBegin, onComplete);
	$(document).KTForm(onInputError, onSuccess, onError, onBegin, onComplete);
	$(document).KTPaging();
	$(document).KTDropdown();
});
</script>
</body>
</html>
